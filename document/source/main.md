# マークダウン変換ツール

## やりたいこと

マークダウンで記述された文字列を対応するHTML文字列へ変換することを目指します。


## 処理概要

### 開始処理

コマンドライン引数より、`入力ファイルパス`・`出力ファイルパス`を受け取ります。
誤りがないことを保証するために、以下の観点でコマンドライン引数を検証します。

* 引数に入力ファイルパス・出力ファイルパスが含まれるか
* 入力ファイルは存在するか
* 出力ファイルパスへ書き込めるか

### 変換処理

入力となるマークダウン文字列を解釈し、HTMLファイルを出力としてつくります。
マークダウンの記法が存在した場合、ルールに則り、HTMLの対応するタグへ変換します。

以降では、本システムが対応する変換ルールを記述します。

#### ヘッダ

`<1-4個の#><半角スペース><任意の文字列>`を満たす行が存在したとき、hタグへ変換します。

```
example:
(入力)
## 目次

(出力)
<h2>目次</h2>
```

#### 引用

`<>><半角スペース><任意の文字列>`を満たす行が存在したとき、blockquoteタグへ変換します。

```
example:
(入力)
> ここは引用です

(出力)
<blockquote>
    <p>
        ここは引用です
    </p>
</blockquote>
```

#### リスト

`<* | -><半角スペース><任意の文字列>`を満たす行が存在したとき、ul, liタグへ変換します。
リストは上記のルールが連続することを前提にしているので、ルールを満たさない行が出現したとき、ulタグの閉じタグを生成します。

```
example:
(入力)
* 犬
* 猫
リスト終わり

(出力)
<ul>
    <li>
        犬
    </li>
    <li>
        猫
    </li>
</ul>
<p>
    リスト終わり
</p>
```

#### コードハイライト

`<3つのバッククォート>`で囲まれた範囲が存在したとき、囲われた箇所をpre, codeタグへ変換します。
また、シンタックスハイライトは、[highlight.js](https://highlightjs.org/)を利用します。

```
example:
(入力)
\`\`\`Python
# これはコメントです
print('hello world')
\`\`\`

(出力)
<pre>
    <code># これはコメントです
print('hello world')
    </code>
</pre>
```

※ 余計な改行・インデントが出力されないよう、codeタグ以下は最低限の改行・インデントのみ含めています。

#### 水平罫線

`<--->`を満たす行が存在したとき、hrタグへ変換します。

```
example:
(入力)
---

(出力)
<hr>
```


---

#### リンク

`[<任意の文字列>](<任意の文字列>)`を満たす文字列が存在したとき、aタグへ変換します。

```
example:
(入力)
[ブログ](https://a-pompom.net/)

(出力)
<a href="https://a-pompom.net/">ブログ</a>
```

#### 囲み

`<バッククォート><任意の文字列><バッククォート>`を満たす文字列が存在したとき、範囲内をcodeタグで囲みます。

```
example:
(入力)
ここで`fetch()`を呼び出します。

(出力)
ここで<code>fetch()</code>を呼び出します。
```

#### 画像

`![<任意の文字列>](<任意の文字列>)`を満たす文字列が存在したとき、imgタグへ変換します。

```
example:
(入力)
![プロフィール画像](https://avatars.githubusercontent.com/u/43694794?v=4)

(出力)
<img src="https://avatars.githubusercontent.com/u/43694794?v=4" alt="プロフィール画像">
```

---

### 出力処理

マークダウン記法の解釈結果をもとに変換結果のHTMLファイルを出力します。

### インタフェース-文字列

ほかのアプリケーションと連携しやすくするために、変換処理の入出力を文字列とすることもできます。
より具体的には、マークダウン文字列が入力として与えられると、対応するHTML文字列を出力します。
